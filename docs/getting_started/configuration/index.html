<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.46" />
    <meta name="description" content="targets">
<meta name="author" content="Mac Heller-Ogden">

    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/images/favicon.png" type="image/x-icon" />
    <title>configuration :: targets</title>
    
    
    <link href="/css/nucleus.css?1533232006" rel="stylesheet">
    <link href="/css/font-awesome.min.css?1533232006" rel="stylesheet">
    <link href="/css/hybrid.css?1533232006" rel="stylesheet">
    <link href="/css/featherlight.min.css?1533232006" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1533232006" rel="stylesheet">
    <link href="/css/auto-complete.css?1533232006" rel="stylesheet">
    <link href="/css/theme.css?1533232006" rel="stylesheet">
    <link href="/css/hugo-theme.css?1533232006" rel="stylesheet">
    
      <link href="/css/theme-targets.css?1533232006" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js?1533232006"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/getting_started/configuration/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg xmlns="http://www.w3.org/2000/svg" width="230" height="70" viewBox="0 0 1747 361">
<defs>
    <style>
      .cls-1 {
        fill: #376993;
      }

      .cls-1, .cls-2 {
        fill-rule: evenodd;
      }

      .cls-2 {
        fill: #93376f;
      }
    </style>
  </defs>
  <path id="targets" class="cls-1" d="M435.235,69.008H344.6V0.4H315V234.744a42.359,42.359,0,0,0,12.638,30.872q12.635,12.821,31.053,12.818h76.549V248.826H358.686A14.179,14.179,0,0,1,344.6,234.744V98.616h90.631V69.008Zm27.438,0V98.616H632.02A14.18,14.18,0,0,1,646.1,112.7v46.219H462.673v75.827a43.764,43.764,0,0,0,43.691,43.69H676.071V112.7a43.766,43.766,0,0,0-44.051-43.69H462.673Zm43.691,179.818a14.18,14.18,0,0,1-14.083-14.082V188.525H646.1v60.3H506.364Zm217.91-167A42.081,42.081,0,0,0,711.456,112.7V278.434h29.608V112.7a14.18,14.18,0,0,1,14.082-14.082H872.859V69.008H755.146A42.085,42.085,0,0,0,724.274,81.826ZM1105.39,112.7a42.374,42.374,0,0,0-12.64-30.872q-12.63-12.813-31.05-12.818H936.045a43.764,43.764,0,0,0-43.69,43.69V234.744a43.764,43.764,0,0,0,43.69,43.69H1075.78V317.07a14.173,14.173,0,0,1-14.08,14.082H930.99v29.97H1061.7q18.42,0,31.05-12.819a42.8,42.8,0,0,0,12.64-31.233V112.7ZM926.116,244.673a13.529,13.529,0,0,1-4.153-9.929V112.7a14.18,14.18,0,0,1,14.082-14.082H1061.7a14.175,14.175,0,0,1,14.08,14.082V234.744a14.175,14.175,0,0,1-14.08,14.082H936.045A13.533,13.533,0,0,1,926.116,244.673ZM1180.86,69.008a43.768,43.768,0,0,0-43.69,43.69V234.744a43.767,43.767,0,0,0,43.69,43.69h169.71V248.826H1180.86a14.175,14.175,0,0,1-14.08-14.082V188.525h183.79V112.7a42.11,42.11,0,0,0-12.82-30.872,42.535,42.535,0,0,0-31.24-12.818H1180.86Zm-14.08,43.69a14.175,14.175,0,0,1,14.08-14.082h125.65A14.192,14.192,0,0,1,1320.6,112.7v46.219H1166.78V112.7Zm341.21-43.69h-90.63V0.4h-29.61V234.744a42.357,42.357,0,0,0,12.64,30.872q12.63,12.821,31.05,12.818h76.55V248.826h-76.55a14.175,14.175,0,0,1-14.08-14.082V98.616h90.63V69.008Zm226.58,12.818a42.535,42.535,0,0,0-31.24-12.818H1577.68a43.751,43.751,0,0,0-43.69,43.69v32.137a43.75,43.75,0,0,0,43.69,43.69h125.65a14.175,14.175,0,0,1,14.08,14.082v32.137a14.175,14.175,0,0,1-14.08,14.082H1577.68a14.193,14.193,0,0,1-14.09-14.082v-2.889h-29.6v2.889a43.75,43.75,0,0,0,43.69,43.69h125.65a42.515,42.515,0,0,0,31.24-12.818,42.084,42.084,0,0,0,12.81-30.872V202.607a42.1,42.1,0,0,0-12.81-30.872,42.534,42.534,0,0,0-31.24-12.818H1577.68a14.193,14.193,0,0,1-14.09-14.082V112.7a14.192,14.192,0,0,1,14.09-14.082h125.65a14.175,14.175,0,0,1,14.08,14.082v2.889h29.97V112.7A42.1,42.1,0,0,0,1734.57,81.826Z"/>
  <path id=":_:" data-name=": :" class="cls-2" d="M-0.223,278.058H55.023V222.813H-0.223v55.245Zm0-209.426v55.607H55.023V68.632H-0.223ZM176.34,278.058h55.246V222.813H176.34v55.245Zm0-209.426v55.607h55.246V68.632H176.34Z"/>
</svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1533232006"></script>
<script type="text/javascript" src="/js/auto-complete.js?1533232006"></script>
<script type="text/javascript">
    
        var baseurl = '\/';
    
</script>
<script type="text/javascript" src="/js/search.js?1533232006"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/getting_started/" title="getting started" class="dd-item 
        parent
        
        
        ">
      <a href="/getting_started/">
          <b>1. </b>getting started
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/getting_started/prerequisites/" title="prerequisites" class="dd-item 
        
        
        
        ">
      <a href="/getting_started/prerequisites/">
          prerequisites
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/getting_started/installation/" title="installation" class="dd-item 
        
        
        
        ">
      <a href="/getting_started/installation/">
          installation
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/getting_started/configuration/" title="configuration" class="dd-item 
        parent
        active
        
        ">
      <a href="/getting_started/configuration/">
          configuration
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/advanced/" title="advanced" class="dd-item 
        
        
        
        ">
      <a href="/advanced/">
          <b>2. </b>advanced
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/advanced/pages/" title="operations" class="dd-item 
        
        
        
        ">
      <a href="/advanced/pages/">
          operations
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/machellerogden/targets"><i class='fa fa-fw fa-github'></i> Github repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="#ZgotmplZ"><i class='fa fa-fw fa-bullhorn'></i> Credits</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
       
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fa fa-fw fa-history"></i> Clear History</a></li>         
      
      </ul>
    </section>
    
    <section id="footer">
      <center>

    
    <a class="github-button" href="https://github.com/machellerogden/targets" data-icon="octicon-star" data-show-count="true" aria-label="Star machellerogden/targets on GitHub">Star</a>

    
    <a class="github-button" href="https://github.com/machellerogden/targets/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork machellerogden/targets on GitHub">Fork</a>

</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/machellerogden/targetsgetting_started/configuration/_index.en.md" target="blank">
                      <i class="fa fa-code-fork"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>targets</a> > <a href='/getting_started/'>getting started</a> > configuration
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#recommended-project-structure-bootstrapping">Recommended Project Structure / Bootstrapping</a></li>
</ul></li>
<li><a href="#more-examples">More Examples</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>configuration</h1>
          

        




<p>Let&rsquo;s jump right in. Consider the code below.</p>

<pre><code class="language-js">#!/usr/bin/env node
'use strict';

const greet = () =&gt; &quot;Hello, World!&quot;;

require('targets')({ targets: { greet } });
</code></pre>

<p>As you can see, the most basic target is just a function.</p>

<p>To run it:
   *  make sure you&rsquo;re running on node v10.x.x or higher (you can check with <code>node -v</code>)
   *  create a new directory with <code>mkdir mycli</code>
   *  change to that directory with <code>cd ./mycli</code>
   *  create a new package.json with <code>npm init -y</code>
   *  <code>npm install --save targets</code>
   *  copy the above example to a file to a new file, <code>./index.js</code>
   *  add this to your package.json: <code>&quot;bin&quot;: &quot;./index.js&quot;,</code> and save the file
   *  make it executable with <code>chmod +x ./index.js</code>
   *  run <code>npm link</code> to create a globally available symlink to your new CLI
   *  run <code>mycli greet</code></p>

<p>You&rsquo;ll see the following output:</p>

<pre><code class="language-text">[greet] Hello, World!
</code></pre>

<p>The output from the <code>greet</code> target is prefix with the target&rsquo;s name.</p>

<p>You can also define a label if you would like to see a different prefix, for example:</p>

<pre><code class="language-js">#!/usr/bin/env node
'use strict';

const greet = () =&gt; &quot;Hello, World!&quot;;

greet.label = &quot;Basic Example&quot;;

require('targets')({ targets: { greet } });
</code></pre>

<p>This time when you run <code>mycli greet</code> you&rsquo;d see the following output:</p>

<pre><code class="language-text">[Basic Example] Hello, World!
</code></pre>

<p>Every target receives on options object.</p>

<pre><code class="language-js">#!/usr/bin/env node
'use strict';

const greet = ({ name = &quot;World&quot; }) =&gt; `Hello, ${name}!`;

greet.label = &quot;Basic Example&quot;;

require('targets')({ targets: { greet } });
</code></pre>

<p>In this case, if you run <code>mycli greet --greet.name Jane</code> you&rsquo;d see the following output:</p>

<pre><code class="language-text">[Basic Example] Hello, Jane!
</code></pre>

<p>Notice how the <code>name</code> option has been namespaced under greet in the command line. If you register multiple targets to a given namespace they will share config. Here&rsquo;s an example.</p>

<pre><code class="language-js">#!/usr/bin/env node
'use strict';

const getWeather = (location) =&gt; Promise.promisify(weatherJs.find)({
    search: location,
    degreeType: 'F'
});

function weatherSky({ location }) {
    return getWeather(location)
        .then((r) =&gt; r.[0].current.skytext);
}
weatherSky.label = &quot;Current Weather&quot;;

function weatherTemp({ location }) {
    return getWeather(location)
        .then((r) =&gt; r.[0].current.temperature);
}
weatherSky.label = &quot;Current Temperature&quot;;

require('targets')({
    targets: {
        'weather.sky': weatherSky,
        'weather.temp': weatherTemp
    }
});
</code></pre>

<p>You can now specify location as <code>--weather.location Chicago</code> for both <code>mycli weather.sky</code> and <code>mycli weather.temp</code>. For example:</p>

<pre><code class="language-text">mycli weather.sky --weather.location Chicago
[Current Weather] Partly Sunny
mycli weather.temp --weather.location Chicago
[Current Temperature] 75
</code></pre>

<p>This is a good point at which to demonstrate how tasks can be composed, or run together. Consider the following.</p>

<pre><code class="language-text">mycli weather.sky weather.temp --weather.location Chicago
[Current Weather] Partly Sunny
[Current Temperature] 75
</code></pre>

<p>But, before we get any further into Targets task composition functionality, let&rsquo;s take a look at other way config can be declared and provided to our targets. Consider the following.</p>

<pre><code class="language-js">#!/usr/bin/env node
'use strict';

const greet = ({ name = &quot;World&quot; }) =&gt; `Hello, ${name}!`;

greet.label = &quot;Config Example&quot;;

greet.prompts = [
    {
        &quot;name&quot;: &quot;name&quot;,
        &quot;message&quot;: &quot;What's your name?&quot;,
        &quot;default&quot;: &quot;World&quot;
    }
];

require('targets')({ targets: { greet } });
</code></pre>

<p>In this example, we&rsquo;re declaring what configuration our target will need in terms of prompts which can be asked to the user.</p>

<p>If we run the above with <code>mycli greet</code> and no additional arguments, Targets will detect that config is missing for the <code>greet</code> target and the user will be prompted. The output will look something like this.</p>

<pre><code class="language-text">mycli greet
? [greet.name] What's your name? John
[Config Example] Hello, John!
</code></pre>

<p>Of course, if the needed config is provided the user will not be prompted, just as before.</p>

<pre><code class="language-text">mycli greet --greet.name Jane
[Config Example] Hello, Jane!
</code></pre>

<p>I call this concept &ldquo;naive config&rdquo;. This gives the user the ability to use your target without knowing what config is needed because the target itself knows how to ask for it. The prompts are <a href="https://www.npmjs.com/package/inquirer">inquirer</a> options. Check the docs to learn all the various ways you&rsquo;ll be able to prompt for config.</p>

<p>Just as with Make, config in target goes much deeper than command-line arguments and prompts. Let&rsquo;s take a look at how Targets handle&rsquo;s config files.</p>

<p>Let&rsquo;s assume there is a <code>./myclirc</code> file in the project&rsquo;s root directory which contains the following.</p>

<pre><code class="language-text">{
    &quot;greet&quot;: {
        &quot;name&quot;: &quot;Bob&quot;
    }
}
</code></pre>

<p>With this file in place, running the command without arguments will now resolve config from the file and the user will not be prompted.</p>

<pre><code class="language-text">mycli greet
[Config Example] Hello, Bob!
</code></pre>

<p>Let&rsquo;s move that rc file so that it resides in the user&rsquo;s home directory (<code>$HOME/.myclirc</code>) instead of in the project directory.</p>

<pre><code class="language-text">mycli greet
[Config Example] Hello, Bob!
</code></pre>

<p>Same effect, it still works. Now if we&rsquo;d copied that file instead of moving it, the project-level config would take priority being deeply merged with other config.</p>

<p>The order of config precedence, from highest to lowest precedence, is as follows:</p>

<ul>
<li>command line arguments</li>
<li>environment variables prefixed with <code>${appname}_</code> (use <code>__</code> to indicate nested properties. e.g. <code>appname_foo__bar__baz</code> =&gt; <code>foo.bar.baz</code>)</li>
<li><code>.${appname}rc</code> in the project root, or the first found in any parent directories</li>
<li><code>$HOME/.${appname}rc</code></li>
<li><code>$HOME/.${appname}/config</code></li>
<li><code>$HOME/.config/${appname}</code></li>
<li><code>$HOME/.config/${appname}/config</code></li>
<li><code>/etc/${appname}rc</code></li>
<li><code>/etc/${appname}/config</code></li>
</ul>

<p>All configs will be deeply merged so that one can extend upon another.</p>

<p>The logic which handles this config cascade comes from the brilliant <a href="https://github.com/dominictarr/rc">rc</a> module by <a href="https://github.com/dominictarr">Dominic Tarr</a>, but it has been modified and reimplemented in my <a href="https://www.npmjs.com/package/answers">answers</a> module in order to handle the deep config merging in a manner which is more suitable for task composition.</p>

<p>To understand how config gets merged, let&rsquo;s do another quick exercise.</p>

<p>Let&rsquo;s start by adding a <code>logger</code> target to our CLI which simple prints out the options which it is provided with.</p>

<pre><code class="language-js">#!/usr/bin/env node
'use strict';

function logger(options) {
    return options;
}

require('targets')({ targets: { logger } });
</code></pre>

<p>To test that it&rsquo;s working, run <code>mycli logger --logger.foo</code>. You should see the following output.</p>

<pre><code class="language-text">mycli logger --logger.foo
[logger] {
[logger]     &quot;foo&quot;: true
[logger] }
</code></pre>

<p>Now, create a <code>./.myclirc</code> in your project directory which contains the following:</p>

<pre><code class="language-js">{
    &quot;logger&quot;: {
        &quot;collection&quot;: [
            {
                &quot;name&quot;: &quot;foo&quot;
            },
            {
                &quot;name&quot;: &quot;foo&quot;
            },
            {
                &quot;name&quot;: &quot;foo&quot;
            }
        ]
    }
}
</code></pre>

<p>Run <code>mycli logger --logger.collection[2].name bar</code>. You should see this output.</p>

<pre><code class="language-text">mycli logger
[logger] {
[logger]     &quot;collection&quot;: [
[logger]         {
[logger]             &quot;name&quot;: &quot;foo&quot;
[logger]         },
[logger]         {
[logger]             &quot;name&quot;: &quot;foo&quot;
[logger]         },
[logger]         {
[logger]             &quot;name&quot;: &quot;bar&quot;
[logger]         }
[logger]     ]
[logger] }
</code></pre>

<p>With targets, you can override and amend to almost any value in the config via command-line arguments no matter how complex the config.</p>

<p>Let&rsquo;s consider a more complex config example. Modify the <code>./.myclirc</code> in your project directory to look like the following:</p>

<pre><code class="language-js">{
    &quot;logger&quot;: {
        &quot;collection&quot;: [
            {
                &quot;people&quot;: [
                    {
                        &quot;name&quot;: &quot;Jane&quot;,
                        &quot;role&quot;: &quot;Developer&quot;
                    },
                    {
                        &quot;name&quot;: &quot;Peter&quot;,
                        &quot;role&quot;: &quot;Manager&quot;
                    }
                ]
            }
        ]
    }
}
</code></pre>

<p>Run <code>mycli logger --logger.collection[0].people[+].name Shana --logger.collection[0].people[+].role Director</code>. You should see this output.</p>

<pre><code class="language-text">mycli logger
[logger] {
[logger]     &quot;collection&quot;: [
[logger]         {
[logger]             &quot;people&quot;: [
[logger]                 {
[logger]                     &quot;name&quot;: &quot;Jane&quot;,
[logger]                     &quot;role&quot;: &quot;Developer&quot;
[logger]                 },
[logger]                 {
[logger]                     &quot;name&quot;: &quot;Peter&quot;,
[logger]                     &quot;role&quot;: &quot;Manager&quot;
[logger]                 },
[logger]                 {
[logger]                     &quot;name&quot;: &quot;Shana&quot;,
[logger]                     &quot;role&quot;: &quot;Director&quot;
[logger]                 }
[logger]             ]
[logger]         }
[logger]     ]
[logger] }
</code></pre>

<p>This <code>[+]</code> syntax is a special syntax which allows you to push items onto an array in the existing config. There are two other special syntaxes. <code>[-]</code> prepends an existing array (&ldquo;unshift&rdquo;) and <code>[&lt;int&gt;,&lt;int&gt;]</code> splices an existing array.</p>

<p>Sometime you will want the result from one target to be bound to the input for another target. Targets supports this via a mechanism called bindings.</p>

<p>Consider the following.</p>

<pre><code class="language-js">#!/usr/bin/env node

'use strict';

function systemName() {
    return require('child_process').spawn('whoami');
}
systemName.label = &quot;System Name&quot;;

function githubUser({ username }) {
    return require('axios')
        .get(`https://api.github.com/users/${username}`)
        .then(({ data }) =&gt; data);
}
githubUser.silent = true;

function greet({ name }) {
    return `Hello, ${name}!`;
}
greet.label = &quot;Greet&quot;;

require('targets')({
    targets: {
        'system.name': systemName,
        'github.user': githubUser,
        greet
    }
});
</code></pre>

<p>Let&rsquo;s run some example of using binding on these targets&hellip;</p>

<pre><code class="language-text">mycli system.name system.name::greet.name greet
[System Name] machellerogden
[Greet] Hello, machellerogden!
</code></pre>

<p>&hellip;and another example&hellip;</p>

<pre><code class="language-text">mycli github.user github.user.name::greet.name greet
[Greet] Hello, Mac Heller-Ogden!
</code></pre>

<p>Tip: the right-side of the binding can use the special array notations: <code>[+]</code>, <code>[-]</code>, <code>[&lt;int&gt;,&lt;int&gt;]</code>.</p>

<p>You can also, rebind config by prefacing your binding with an <code>@</code> character. For example&hellip;</p>

<pre><code class="language-text">mycli --foo.location Miami @foo.location::weather.location weather.sky
</code></pre>

<p>In this example the foo location config value will be copied over to weather.location.</p>

<p>This is particularly useful when you are creating composite targets. Consider the following config:</p>

<pre><code class="language-text">{
    &quot;name&quot;: &quot;myproject&quot;
}
</code></pre>

<p>&hellip;let&rsquo;s say you have a docker namespace and a k8s namespace target which both want to use this top-level name property. For this scenario, you could write a composite target like so:</p>

<pre><code class="language-text">// deploy.js
module.exports = [ '@name::docker.name', '@name::k8s.name', 'docker.build', 'docker.push', 'k8s.deploy' ];
</code></pre>

<p>Now that you understand bindings, let&rsquo;s talk about sequencing. Targets are run
sequentially by default, but when separated by comma will be invoked in parallel.
Here&rsquo;s an example.</p>

<pre><code class="language-text">mycli weather.sky,weather.temp --weather.location Chicago
[Current Temperature] 75
[Current Weather] Partly Sunny
</code></pre>

<p>Note the order of the results. Because these were run in parallel the order of the results is non-deterministic.</p>

<p>Targets can also be defined as streams. Consider the following.</p>

<pre><code class="language-js">'use strict';

function tcpdump() {
    return require('child_process').spawn('tcpdump', ['-i', 'en0', '-n', '-s', '0']);
}

require('targets')({ targets: { tcpdump } });
</code></pre>

<p>Now, when we run <code>sudo mycli tcpdump</code> the output from tcpdump is streamed to the console.</p>

<pre><code class="language-text">sudo mycli tcpdump
[tcpdump] output here...
[tcpdump] output here...
[tcpdump] output here...
[tcpdump] output here...
[tcpdump] output here...
</code></pre>

<h3 id="recommended-project-structure-bootstrapping">Recommended Project Structure / Bootstrapping</h3>

<p>I recommend you structure your Targets application in the following manner.</p>

<pre><code class="language-text">./mycli
  └─┬─┬─ targets/
    │ ├─── ip.js
    │ ├─── memory.js
    │ └─── tcpdump.js
    ├─ package.json
    ├─ index.js
    └─ .myclirc
</code></pre>

<p>Then, in <code>./index.js</code> you just need to include the following to auto register any new target file modules.</p>

<pre><code class="language-js">#!/usr/bin/env node
'use strict';

const targets = require('require-dir')('./targets');

require('targets')({ name: 'mycli', targets });
</code></pre>

<p>With this structure in place, so long as each file module inside the <code>./targets</code> directory exports a function, the filename (minus the extension) will become the target&rsquo;s name.</p>

<h2 id="more-examples">More Examples</h2>

<p>Review the <a href="https://github.com/machellerogden/targets/tree/master/examples">./examples</a> directory for more examples.</p>


<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/getting_started/installation/" title="installation"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/advanced/" title="advanced" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1533232006"></script>
    <script src="/js/perfect-scrollbar.min.js?1533232006"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1533232006"></script>
    <script src="/js/jquery.sticky.js?1533232006"></script>
    <script src="/js/featherlight.min.js?1533232006"></script>
    <script src="/js/html5shiv-printshiv.min.js?1533232006"></script>
    <script src="/js/highlight.pack.js?1533232006"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js?1533232006"></script>
    <script src="/js/learn.js?1533232006"></script>
    <script src="/js/hugo-learn.js?1533232006"></script>

    <link href="/mermaid/mermaid.css?1533232006" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1533232006"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>

</script>

  </body>
</html>
